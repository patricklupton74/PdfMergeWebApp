            <html>
                <head>
                    <title>click button to download pdf</title>
                    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
                </head>
                <body>

                    <h1>MERGE PDFS</h1>
                    <form id="mergeForm">
                        <input id="fileInput" type="file" name="files" accept=".pdf" multiple required />
                        <ul id="fileList" style="cursor: grab;"></ul>
                        <button type="submit">MERGE</button>
                    </form>

                    <script>
                    const fileInput = document.getElementById("fileInput");
                    const fileList = document.getElementById("fileList");
                    const mergeForm = document.getElementById("mergeForm");
                    let filesArray = [];

                    // 1. Handle File Selection
                    fileInput.addEventListener("change", (event) => {
                        filesArray = Array.from(event.target.files);
                        renderList();
                    });

                    function renderList() {
                        fileList.innerHTML = "";
                        filesArray.forEach((file, index) => {
                            const li = document.createElement("li");
                            li.textContent = file.name;
                            // Store reference to the actual file object
                            li.fileReference = file; 
                            fileList.appendChild(li);
                        });
                    }

                    // 2. Initialize Sortable
                    new Sortable(fileList, {
                        animation: 150,
                        onEnd: () => {
                            // Re-sync filesArray based on the new DOM order
                            const newOrder = [];
                            fileList.querySelectorAll("li").forEach(li => {
                                newOrder.push(li.fileReference);
                            });
                            filesArray = newOrder;
                        }
                    });

                    // 3. Handle Form Submission via Fetch
                    mergeForm.addEventListener("submit", async (e) => {
                        e.preventDefault();
                        
                        if (filesArray.length === 0) return;

                        const formData = new FormData();
                        // Append files in the specific order of filesArray
                        filesArray.forEach(file => {
                            formData.append("files", file);
                        });

                        try {
                            const response = await fetch("/pdf/merge", {
                                method: "POST",
                                body: formData
                            });
                            
                            if (response.ok) {
                                // Handle the downloaded merged PDF
                                const blob = await response.blob();
                                const url = window.URL.createObjectURL(blob);
                                const a = document.createElement("a");
                                a.href = url;
                                a.download = "merged.pdf";
                                document.body.appendChild(a);
                                a.click();
                                a.remove();
                            } else {
                                alert("Merge failed on server.");
                            }
                        } catch (error) {
                            console.error("Error:", error);
                        }
                    });
                    </script>
                    
                </body>
                </html>


            
        </body>
    </html>